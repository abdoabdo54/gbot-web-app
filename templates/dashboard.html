{% extends "base.html" %}
{% block title %}Dashboard - GBot Web{% endblock %}

{% block content %}
<!-- Tab Navigation -->
<div class="tab-navigation">
    <nav>
        <button class="tab-button active" onclick="showTab('tab1')">
            <i class="fas fa-user-friends"></i>
            <span>Account & User Mgmt</span>
        </button>
        <button class="tab-button" onclick="showTab('tab2')">
            <i class="fas fa-user-plus"></i>
            <span>User Create/Delete/Domain</span>
        </button>
        <button class="tab-button" onclick="showTab('tab3')">
            <i class="fas fa-exchange-alt"></i>
            <span>Bulk Domain Change</span>
        </button>
    </nav>
</div>

<!-- Tab 1: Account & User Management (existing content) -->
<div id="tab1" class="tab-content active">    
<!-- Account Selection & Authentication -->
<div class="github-card">
    <div class="github-card-header">
        <h3 class="github-card-title">
            <i class="fas fa-user-friends"></i>
            Account Selection & Authentication
        </h3>
    </div>
    
    <div style="display: grid; grid-template-columns: 1fr auto; gap: 16px; align-items: end; margin-bottom: 20px;">
        <div class="form-group-github">
            <label for="account-select" class="form-label-github">
                <i class="fas fa-user-circle"></i> Select Account
            </label>
            <select id="account-select" class="form-control-github">
            <option value="">Choose an account...</option>
                {% for account in accounts %}
                <option value="{{ account.account_name }}" data-account-id="{{ account.id }}">{{ account.account_name }}</option>
            {% endfor %}
        </select>
        </div>
        <button onclick="authenticateAccount()" class="btn-github btn-github-primary">
            <i class="fas fa-key"></i> Authenticate Selected
        </button>
    </div>
    
    <div style="display: flex; flex-wrap: wrap; gap: 12px; margin-bottom: 20px;">
        {% if session.role != 'mailer' %}
        <button onclick="openAddAccountModal()" class="btn-github">
            <i class="fas fa-plus"></i> Add Manually
        </button>
        <button onclick="addFromServerJSON()" class="btn-github">
            <i class="fas fa-folder-open"></i> Add from Server JSON
        </button>
        {% endif %}
        {% if session.role == 'admin' %}
        <button onclick="forceTokenStatusCheck()" class="btn-github" style="background-color: var(--color-warning-emphasis); border-color: var(--color-warning-emphasis); color: #ffffff;">
            <i class="fas fa-search"></i> Check Token Status Now (Admin)
        </button>
        {% endif %}    
        <button onclick="enterAuthorizationCode()" class="btn-github">
            <i class="fas fa-code"></i> Enter Authorization Code
        </button>
    </div>
    
    <!-- Search and Account List Area -->
    <div class="account-management-area">
        <div class="search-and-list">
            <input type="text" id="account-search" placeholder="Search accounts in list..." 
                    oninput="filterAccounts()" class="search-input" 
                    autocomplete="off" autocomplete="nope" readonly onfocus="this.removeAttribute('readonly');">
            
            <div id="account-list-area" class="account-list">
                {% for account in accounts %}
                <div class="account-item" data-account-name="{{ account.account_name }}" data-account-id="{{ account.id }}" onclick="selectAccountFromList(this.dataset.accountName, this.dataset.accountId)">
                    {{ account.account_name }}
                </div>
                {% endfor %}
            </div>
        </div>
        
        <div class="account-actions">
            <button onclick="authenticateFromList()" class="action-button">
                üîë Authenticate<br>(List Selection)
            </button>
            <button onclick="deleteFromList()" class="action-button delete-button">
                üóëÔ∏è Delete Account<br>(List Selection)
            </button>
        </div>
    </div>
    <div id="account-count-display" class="count-display">
        <span id="account-stats">Loading account statistics...</span>
    </div>
    <div id="auth-status" class="status-box">
        <p>No account authenticated</p>
    </div>
</div>

<!-- Add Account Modal -->
<div id="addAccountModal" class="modal" style="display: none;">
    <div class="modal-content">
        <div class="modal-header">
            <h3 class="modal-title">
                <i class="fas fa-plus"></i> Add Account Manually
            </h3>
            <button type="button" class="btn-github" onclick="closeAddAccountModal()" style="margin-left: auto;">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="modal-body">
        <form id="addAccountForm">
                <div class="form-group-github">
                    <label for="new-account-email" class="form-label-github">
                        <i class="fas fa-envelope"></i> Account Email
                    </label>
                    <input type="email" id="new-account-email" class="form-control-github" required placeholder="admin@yourdomain.com">
            </div>
                <div class="form-group-github">
                    <label for="new-client-id" class="form-label-github">
                        <i class="fas fa-key"></i> Client ID
                    </label>
                    <input type="text" id="new-client-id" class="form-control-github" required placeholder="123456789-abcdef.apps.googleusercontent.com">
            </div>
                <div class="form-group-github">
                    <label for="new-client-secret" class="form-label-github">
                        <i class="fas fa-lock"></i> Client Secret
                    </label>
                    <input type="password" id="new-client-secret" class="form-control-github" required placeholder="GOCSPX-your_client_secret">
            </div>
        </form>
        </div>
        <div class="modal-footer">
            <button type="button" onclick="saveNewAccount()" class="btn-github btn-github-primary">
                <i class="fas fa-save"></i> Save Account
            </button>
            <button type="button" onclick="closeAddAccountModal()" class="btn-github">
                <i class="fas fa-times"></i> Cancel
            </button>
        </div>
    </div>
</div>



<!-- OAuth Authorization Modal -->
<div id="oauthModal" class="modal" style="display: none;">
    <div class="modal-content">
        <div class="modal-header">
            <h3 class="modal-title">
                <i class="fas fa-link"></i> OAuth Authorization Required
            </h3>
            <button type="button" class="btn-github" onclick="closeOAuthModal()" style="margin-left: auto;">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="modal-body">
            <p>Please copy this link and open it in your browser to authorize the account:</p>
            <div id="oauthUrl" class="data-display" style="font-family: monospace; word-break: break-all; margin: 16px 0;"></div>
            <div style="background-color: rgba(9, 105, 218, 0.1); border: 1px solid var(--color-accent-emphasis); border-radius: 6px; padding: 12px; color: var(--color-accent-fg); font-size: 14px;">
                <i class="fas fa-lightbulb"></i>
                <strong>Tip:</strong> You can copy this link to use in another browser or app for authorization.
            </div>
        </div>
        <div class="modal-footer">
            <button onclick="copyOAuthUrl()" class="btn-github">
                <i class="fas fa-copy"></i> Copy Link
            </button>
            <button onclick="openOAuthUrl()" class="btn-github btn-github-primary">
                <i class="fas fa-external-link-alt"></i> Open Link
            </button>
            <button onclick="closeOAuthModal()" class="btn-github">
                <i class="fas fa-times"></i> Close
            </button>
        </div>
    </div>
</div>

    <!-- User Listing & Actions -->
<div class="github-card">
    <div class="github-card-header">
        <h3 class="github-card-title">
            <i class="fas fa-users"></i>
            User Listing & Basic Actions
        </h3>
    </div>
        
        <div class="button-row">
        <button onclick="retrieveUsers()" class="btn-github btn-github-primary">
            <i class="fas fa-chart-bar"></i> Retrieve All Users
        </button>
        <button onclick="clearUserList()" class="btn-github">
            <i class="fas fa-broom"></i> Clear List
        </button>
        <button onclick="copyAllUsers()" class="btn-github">
            <i class="fas fa-copy"></i> Copy All
        </button>
        </div>
        
        <div id="user-display" class="data-display">
        <div class="status-info">
            <p><strong><i class="fas fa-users"></i> User Management</strong></p>
            <p>Click "Retrieve All Users" to load and display all users from your Google Workspace.</p>
            <p><small>This will show user status (Active/Suspended), admin privileges, and provide options for bulk operations.</small></p>
        </div>
        </div>
        
        <div id="user-count" class="count-display">Total Users: 0</div>
        
    <div style="display: grid; grid-template-columns: 1fr auto; gap: 16px; align-items: end; margin-top: 16px;">
        <div class="form-group-github">
            <label for="new-password" class="form-label-github">
                <i class="fas fa-lock"></i> New Password for All Users
            </label>
            <input type="password" id="new-password" class="form-control-github" placeholder="Enter new password for all users" autocomplete="new-password" readonly onfocus="this.removeAttribute('readonly');">
        </div>
        <button onclick="updateAllPasswords()" class="btn-github btn-github-danger">
            <i class="fas fa-key"></i> Update Password (All)
        </button>
        </div>
    </div>

    <!-- Domain Info
    <div class="section">
        <h3>üåê Domain Info & Subdomain Utility</h3>
        
        <div class="button-row">
            <button onclick="retrieveDomains()">üîç Retrieve Domains</button>
            <button onclick="clearDomainDisplay()">üßπ Clear Display</button>
        </div>
        
        <div id="domain-display" class="data-display">
            <p>Click 'Retrieve Domains' to view domains here...</p>
        </div>
    </div> -->

    <!-- Suspended Users -->
<div class="github-card">
    <div class="github-card-header">
        <h3 class="github-card-title">
            <i class="fas fa-user-slash"></i>
            Suspended User Management
        </h3>
    </div>
        
        <div class="button-row">
        <button onclick="loadSuspendedUsers()" class="btn-github btn-github-primary">
            <i class="fas fa-search"></i> Load Suspended Users
        </button>
        <button onclick="copySuspendedUsers()" class="btn-github">
            <i class="fas fa-copy"></i> Copy Selected
        </button>
        <button onclick="refreshSuspendedUsers()" class="btn-github">
            <i class="fas fa-sync-alt"></i> Refresh Status
        </button>
        <button onclick="clearSuspendedUsers()" class="btn-github">
            <i class="fas fa-broom"></i> Clear Display
        </button>
        </div>
        
        <div id="suspended-display" class="data-display">
        <div class="status-info">
            <p><strong><i class="fas fa-user-slash"></i> Suspended User Management</strong></p>
            <p>Click "Load Suspended Users" to check for suspended accounts in your Google Workspace.</p>
            <p><small>This will show all users with suspended status, including their names, emails, and admin privileges.</small></p>
        </div>
    </div>
</div>
</div>

<!-- Tab 2: User Create/Delete/Domain -->
<div id="tab2" class="tab-content">
    
    <!-- Create Single User -->
    <div class="github-card">
        <div class="github-card-header">
            <h3 class="github-card-title">
                <i class="fas fa-user-plus"></i>
                Create Single User
            </h3>
        </div>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 16px;">
            <div class="form-group-github">
                <label for="new-user-first-name" class="form-label-github">
                    <i class="fas fa-user"></i> First Name
                </label>
                <input type="text" id="new-user-first-name" class="form-control-github" placeholder="Enter first name">
        </div>
            <div class="form-group-github">
                <label for="new-user-last-name" class="form-label-github">
                    <i class="fas fa-user"></i> Last Name
                </label>
                <input type="text" id="new-user-last-name" class="form-control-github" placeholder="Enter last name">
            </div>
        </div>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 20px;">
            <div class="form-group-github">
                <label for="new-user-email" class="form-label-github">
                    <i class="fas fa-envelope"></i> Email Address
                </label>
                <input type="email" id="new-user-email" class="form-control-github" placeholder="user@domain.com">
            </div>
            <div class="form-group-github">
                <label for="new-user-password" class="form-label-github">
                    <i class="fas fa-lock"></i> Password
                </label>
                <input type="password" id="new-user-password" class="form-control-github" placeholder="Enter password">
            </div>
        </div>
        <button onclick="createSingleUser()" class="btn-github btn-github-primary">
            <i class="fas fa-plus"></i> Create User
        </button>
    </div>

    <!-- Domain Management -->
    <div class="github-card">
        <div class="github-card-header">
            <h3 class="github-card-title">
                <i class="fas fa-globe"></i>
                Domain Management
            </h3>
        </div>
        <div class="button-row">
            <button onclick="getDomainInfo()" class="btn-github btn-github-primary">
                <i class="fas fa-search"></i> Retrieve Domains
            </button>
        </div>
        <div id="domain-info-display" class="data-display">
            <div class="status-info">
                <p><strong><i class="fas fa-globe"></i> Domain Information</strong></p>
                <p>Click "Retrieve Domains" to view domains here...</p>
        </div>
        </div>
        <div style="display: grid; grid-template-columns: 1fr auto; gap: 16px; align-items: end; margin-top: 16px;">
            <div class="form-group-github">
                <label for="new-domain-alias" class="form-label-github">
                    <i class="fas fa-plus"></i> New Domain Alias
                </label>
                <input type="text" id="new-domain-alias" class="form-control-github" placeholder="Enter new domain alias">
            </div>
            <button onclick="addDomainAlias()" class="btn-github btn-github-primary">
                <i class="fas fa-plus"></i> Add Domain Alias
            </button>
        </div>
    </div>

    <!-- Create Users from CSV File -->
    <div class="github-card">
        <div class="github-card-header">
            <h3 class="github-card-title">
                <i class="fas fa-file-csv"></i>
                Create Users from CSV File
            </h3>
        </div>
        <div style="display: grid; grid-template-columns: 1fr auto; gap: 16px; align-items: end;">
            <div class="form-group-github">
                <label for="csv-file-input" class="form-label-github">
                    <i class="fas fa-file-upload"></i> Select CSV File
                </label>
                <input type="file" id="csv-file-input" class="form-control-github" accept=".csv">
            </div>
            <button onclick="createUsersFromCSV()" class="btn-github btn-github-primary">
                <i class="fas fa-upload"></i> Create Users from CSV
            </button>
        </div>
    </div>

    <!-- Create Random Users -->
    <div class="github-card">
        <div class="github-card-header">
            <h3 class="github-card-title">
                <i class="fas fa-random"></i>
                Create Random Users
            </h3>
        </div>
        <div style="display: grid; grid-template-columns: 1fr 1fr auto; gap: 16px; align-items: end;">
            <div class="form-group-github">
                <label for="random-user-count" class="form-label-github">
                    <i class="fas fa-hashtag"></i> Number of Users
                </label>
                <input type="number" id="random-user-count" class="form-control-github" min="1" max="100" placeholder="e.g., 10">
            </div>
            <div class="form-group-github">
                <label for="random-user-domain" class="form-label-github">
                    <i class="fas fa-globe"></i> Domain
                </label>
                <input type="text" id="random-user-domain" class="form-control-github" placeholder="example.com">
            </div>
            <button onclick="createRandomUsers()" class="btn-github btn-github-primary">
                <i class="fas fa-random"></i> Create Random Users
            </button>
        </div>
    </div>

    <!-- Change Domain for Specific Users -->
    <div class="github-card">
        <div class="github-card-header">
            <h3 class="github-card-title">
                <i class="fas fa-exchange-alt"></i>
                Change Domain for Specific Users
            </h3>
        </div>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 16px;">
            <div class="form-group-github">
                <label for="old-domain" class="form-label-github">
                    <i class="fas fa-globe"></i> Current Domain
                </label>
                <input type="text" id="old-domain" class="form-control-github" placeholder="old.com">
            </div>
            <div class="form-group-github">
                <label for="new-domain" class="form-label-github">
                    <i class="fas fa-globe"></i> New Domain
                </label>
                <input type="text" id="new-domain" class="form-control-github" placeholder="new.com">
            </div>
        </div>
        <div class="form-group-github" style="margin-bottom: 20px;">
            <label for="domain-change-emails" class="form-label-github">
                <i class="fas fa-envelope"></i> Email Addresses (one per line)
            </label>
            <textarea id="domain-change-emails" class="form-control-github" rows="4" placeholder="user1@old.com&#10;user2@old.com&#10;user3@old.com"></textarea>
        </div>
        <button onclick="changeDomainForUsers()" class="btn-github btn-github-primary">
            <i class="fas fa-exchange-alt"></i> Change Domain for These Users
        </button>
    </div>

    <!-- Delete Specific Users -->
    <div class="github-card">
        <div class="github-card-header">
            <h3 class="github-card-title">
                <i class="fas fa-user-times"></i>
                Delete Specific Users
            </h3>
        </div>
        <div class="form-group-github" style="margin-bottom: 20px;">
            <label for="delete-user-emails" class="form-label-github">
                <i class="fas fa-envelope"></i> Email Addresses to Delete (one per line)
            </label>
            <textarea id="delete-user-emails" class="form-control-github" rows="4" placeholder="user1@domain.com&#10;user2@domain.com&#10;user3@domain.com"></textarea>
        </div>
        <button onclick="deleteSpecificUsers()" class="btn-github btn-github-danger">
            <i class="fas fa-trash"></i> Delete These Users
        </button>
    </div>

    <!-- Results Log -->
    <div class="github-card">
        <div class="github-card-header">
            <h3 class="github-card-title">
                <i class="fas fa-file-alt"></i>
                Results Log
            </h3>
        </div>
        <div style="display: flex; gap: 12px; margin-bottom: 16px;">
            <button onclick="clearResultsLog()" class="btn-github">
                <i class="fas fa-broom"></i> Clear Log
            </button>
            <button onclick="copyResultsLog()" class="btn-github">
                <i class="fas fa-copy"></i> Copy Log
            </button>
        </div>
        <div id="results-log" class="data-display" style="font-family: monospace; font-size: 13px;"></div>
    </div>
</div>

<!-- Tab 3: Bulk Domain Change -->
<div id="tab3" class="tab-content">
    
    <!-- Workflow 1: Change Domain using CSV File -->
    <div class="github-card">
        <div class="github-card-header">
            <h3 class="github-card-title">
                <i class="fas fa-file-csv"></i>
                Workflow 1: Change Domain using CSV File
            </h3>
        </div>
        
        <!-- Step 1.1: Download Current Users to CSV -->
        <div style="margin-bottom: 32px;">
            <h4 style="font-size: 16px; font-weight: 600; color: var(--color-fg-default); margin: 0 0 16px 0; display: flex; align-items: center; gap: 8px;">
                <i class="fas fa-download" style="color: var(--color-accent-fg);"></i>
                Step 1.1: Download Current Users to CSV
            </h4>
            <div style="margin-bottom: 16px;">
                <button onclick="downloadAllUsersCSV()" class="btn-github btn-github-primary">
                    <i class="fas fa-download"></i> Download All Users
                </button>
                </div>
            <div style="background-color: rgba(9, 105, 218, 0.1); border: 1px solid var(--color-accent-emphasis); border-radius: 6px; padding: 12px; color: var(--color-accent-fg); font-size: 14px;">
                <i class="fas fa-info-circle"></i>
                CSV will be saved to: <strong id="csv-save-path">Downloads folder</strong>
            </div>
        </div>
        
        <!-- Step 1.2: Select New Domain and Apply to Downloaded CSV -->
        <div style="margin-bottom: 32px;">
            <h4 style="font-size: 16px; font-weight: 600; color: var(--color-fg-default); margin: 0 0 16px 0; display: flex; align-items: center; gap: 8px;">
                <i class="fas fa-globe" style="color: var(--color-accent-fg);"></i>
                Step 1.2: Select New Domain and Apply to Downloaded CSV
            </h4>
            <div style="display: flex; flex-wrap: wrap; gap: 12px; margin-bottom: 16px;">
                <button onclick="retrieveAvailableDomains()" class="btn-github">
                    <i class="fas fa-search"></i> Retrieve Available Domains
                </button>
                <button onclick="getDomainUsageStats()" class="btn-github" style="background-color: var(--color-success-emphasis); border-color: var(--color-success-emphasis); color: #ffffff;">
                    <i class="fas fa-chart-bar"></i> Domain Usage Stats
                </button>
                <button onclick="clearOldDomainData()" class="btn-github" style="background-color: var(--color-warning-emphasis); border-color: var(--color-warning-emphasis); color: #ffffff;">
                    <i class="fas fa-trash"></i> Clear Old Data
                </button>
                <button onclick="applySelectedDomainToCSV()" class="btn-github btn-github-primary">
                    <i class="fas fa-check"></i> Apply Selected Domain to CSV
                </button>
                <button onclick="debugDomainUsers()" class="btn-github" style="background-color: #6f42c1; border-color: #6f42c1; color: #ffffff;">
                    <i class="fas fa-bug"></i> Debug Domain Users
                </button>
                </div>
                
            <div id="available-domains" class="data-display">
                <div class="status-info">
                    <p><strong><i class="fas fa-globe"></i> Domain Selection</strong></p>
                    <p>Click 'Retrieve Available Domains' to view available domains</p>
                </div>
            </div>
        </div>
        
        <!-- Step 1.3: Process Domain Changes from Modified CSV -->
        <div>
            <h4 style="font-size: 16px; font-weight: 600; color: var(--color-fg-default); margin: 0 0 16px 0; display: flex; align-items: center; gap: 8px;">
                <i class="fas fa-cogs" style="color: var(--color-accent-fg);"></i>
                Step 1.3: Process Domain Changes from Modified CSV
            </h4>
            <div style="display: grid; grid-template-columns: 1fr auto; gap: 16px; align-items: end; margin-bottom: 16px;">
                <div class="form-group-github">
                    <label for="csv-file-path" class="form-label-github">
                        <i class="fas fa-file-csv"></i> CSV File Path
                    </label>
                    <input type="text" id="csv-file-path" class="form-control-github" placeholder="CSV file path will appear here after download/apply, or browse manually..." readonly>
                </div>
                <button onclick="browseCSVFile()" class="btn-github">
                    <i class="fas fa-folder-open"></i> Browse Manually...
                </button>
                </div>
            <button onclick="processDomainChangesFromCSV()" class="btn-github btn-github-primary">
                <i class="fas fa-cogs"></i> Process Domain Changes from CSV
            </button>
        </div>
    </div>

    <!-- Workflow 2: Change Domain for All Users (Non-CSV, Excludes Admin) -->
    <div class="github-card">
        <div class="github-card-header">
            <h3 class="github-card-title">
                <i class="fas fa-exchange-alt"></i>
                Workflow 2: Change Domain for All Users (Non-CSV, Excludes Admin)
            </h3>
        </div>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 20px;">
            <div class="form-group-github">
                <label for="current-domain-suffix" class="form-label-github">
                    <i class="fas fa-globe"></i> Current Domain Suffix
                </label>
                <input type="text" id="current-domain-suffix" class="form-control-github" placeholder="old-domain.com">
            </div>
            <div class="form-group-github">
                <label for="new-domain-suffix" class="form-label-github">
                    <i class="fas fa-globe"></i> New Domain Suffix
                </label>
                <input type="text" id="new-domain-suffix" class="form-control-github" placeholder="new-domain.com">
            </div>
            </div>
        
        <button onclick="changeDomainForAllUsers()" class="btn-github" style="background-color: var(--color-warning-emphasis); border-color: var(--color-warning-emphasis); color: #ffffff;">
            <i class="fas fa-exchange-alt"></i> Change Domain for ALL Matching Users (Non-Admin)
        </button>
    </div>

    <!-- Results Log (Covers Both Workflows) -->
    <div class="github-card">
        <div class="github-card-header">
            <h3 class="github-card-title">
                <i class="fas fa-file-alt"></i>
                Results Log (Covers Both Workflows)
            </h3>
        </div>
        
        <div style="margin-bottom: 16px;">
            <button onclick="clearBulkDomainLog()" class="btn-github">
                <i class="fas fa-broom"></i> Clear Log
            </button>
        </div>
        
        <div id="bulk-domain-results" class="data-display" style="font-family: monospace; font-size: 13px;">
            <div class="status-info">
                <p><strong><i class="fas fa-file-alt"></i> Processing Results</strong></p>
                <p>Processing results will appear here...</p>
            </div>
        </div>
    </div>

    <!-- SMTP Credential Tester -->
    <div class="github-card" style="margin-top: 32px;">
        <div class="github-card-header">
            <h3 class="github-card-title">
                <i class="fas fa-envelope"></i>
                SMTP Credential Tester
            </h3>
        </div>
        
        <div class="form-group-github" style="margin-bottom: 12px;">
            <label for="smtp-credentials" class="form-label-github">
                <i class="fas fa-key"></i> SMTP Credentials (email:password, one per line)
            </label>
            <textarea id="smtp-credentials" class="form-control-github" rows="3" placeholder="user1@gmail.com:password123&#10;user2@outlook.com:apppassword456&#10;user3@yahoo.com:secretpass789"></textarea>
        </div>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px; margin-bottom: 12px;">
            <div class="form-group-github">
                <label for="smtp-recipient" class="form-label-github">
                    <i class="fas fa-envelope"></i> Recipient Email
                </label>
                <input type="email" id="smtp-recipient" class="form-control-github" placeholder="test@domain.com">
            </div>
            <div class="form-group-github">
                <label for="smtp-server" class="form-label-github">
                    <i class="fas fa-server"></i> SMTP Server
                </label>
                <input type="text" id="smtp-server" class="form-control-github" value="smtp.gmail.com" placeholder="SMTP Server">
            </div>
            <div class="form-group-github">
                <label for="smtp-port" class="form-label-github">
                    <i class="fas fa-plug"></i> Port
                </label>
                <input type="number" id="smtp-port" class="form-control-github" value="587" placeholder="Port">
            </div>
        </div>
        
        <div style="display: flex; gap: 8px; margin-bottom: 12px;">
            <button onclick="testSMTPCredentials()" class="btn-github btn-github-primary">
                <i class="fas fa-paper-plane"></i> Send Test Emails
            </button>
            <button onclick="interruptSMTPTesting()" class="btn-github" style="background-color: var(--color-warning-emphasis); border-color: var(--color-warning-emphasis); color: #ffffff;">
                <i class="fas fa-stop"></i> Interrupt Sending
            </button>
            <button onclick="clearSMTPResults()" class="btn-github">
                <i class="fas fa-broom"></i> Clear Log / Reset Files
            </button>
        </div>
        
        <div>
            <h4 style="font-size: 16px; font-weight: 600; color: var(--color-fg-default); margin: 0 0 16px 0; display: flex; align-items: center; gap: 8px;">
                <i class="fas fa-chart-bar" style="color: var(--color-accent-fg);"></i>
                SMTP Test Results
            </h4>
            <div id="smtp-results-log" class="data-display" style="font-family: monospace; font-size: 13px;">
                <div class="status-info">
                    <p><strong><i class="fas fa-envelope"></i> SMTP Testing Results</strong></p>
                    <p>Test results will appear here...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Generate Sample CSV for User Creation -->
    <div class="github-card">
        <div class="github-card-header">
            <h3 class="github-card-title">
                <i class="fas fa-file-csv"></i>
                Generate Sample CSV for User Creation
            </h3>
        </div>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 16px; margin-bottom: 20px;">
            <div class="form-group-github">
                <label for="csv-num-users" class="form-label-github">
                    <i class="fas fa-hashtag"></i> Number of Users
                </label>
                <input type="number" id="csv-num-users" class="form-control-github" min="1" max="1000" placeholder="e.g., 50">
            </div>
            <div class="form-group-github">
                <label for="csv-domain" class="form-label-github">
                    <i class="fas fa-globe"></i> Domain
                </label>
                <input type="text" id="csv-domain" class="form-control-github" placeholder="yourdomain.com">
            </div>
            <div class="form-group-github">
                <label for="csv-password" class="form-label-github">
                    <i class="fas fa-lock"></i> Default Password
                </label>
                <input type="text" id="csv-password" class="form-control-github" placeholder="Default password for all users">
            </div>
        </div>
        
        <div style="display: flex; gap: 12px; margin-bottom: 20px;">
            <button onclick="generateUserCSV()" class="btn-github btn-github-primary">
                <i class="fas fa-download"></i> Generate CSV File
            </button>
            <button onclick="previewCSV()" class="btn-github">
                <i class="fas fa-eye"></i> Preview CSV
            </button>
        </div>
        
        <div id="csv-download-area" class="data-display"></div>
        
        <div id="csv-preview-area" class="csv-preview"></div>
    </div>
</div>
</div>

<script>
let currentAccount = null;
let isAuthenticated = false;
let selectedAccountFromList = null;
let selectedAccountId = null;
let smtpTesting = false;
let selectedDomain = null;

// Tab switching functionality - CLEAN VERSION
function showTab(tabId) {
    console.log('Switching to tab:', tabId);
    
    // Hide all tab contents
    const tabs = document.querySelectorAll('.tab-content');
    tabs.forEach(tab => {
        tab.classList.remove('active');
        tab.style.display = 'none';
    });
    
    // Remove active class from all tab buttons
    const buttons = document.querySelectorAll('.tab-button');
    buttons.forEach(button => {
        button.classList.remove('active');
        button.style.background = 'var(--color-canvas-subtle)';
        button.style.borderBottom = '1px solid var(--color-border-default)';
        button.style.color = 'var(--color-fg-muted)';
    });
    
    // Show selected tab
    const selectedTab = document.getElementById(tabId);
    if (selectedTab) {
        console.log('Found tab element:', selectedTab);
        selectedTab.classList.add('active');
        selectedTab.style.display = 'block';
        selectedTab.style.visibility = 'visible';
        selectedTab.style.opacity = '1';
        console.log(`Successfully showing tab: ${tabId}`);
    } else {
        console.error('Tab not found:', tabId);
    }
    
    // Add active class to clicked button  
    const clickedButton = event ? event.target.closest('.tab-button') : document.querySelector(`[onclick="showTab('${tabId}')"]`);
    if (clickedButton) {
        clickedButton.classList.add('active');
        clickedButton.style.background = 'var(--color-canvas-default)';
        clickedButton.style.borderBottom = '3px solid var(--color-accent-emphasis)';
        clickedButton.style.color = 'var(--color-fg-default)';
        clickedButton.style.fontWeight = '600';
    }
}

// SMTP Testing Functions
function testSMTPCredentials() {
    console.log('Testing SMTP credentials...');
    smtpTesting = true;
    
    const credentials = document.getElementById('smtp-credentials').value.trim();
    const recipient = document.getElementById('smtp-recipient').value.trim();
    const server = document.getElementById('smtp-server').value.trim();
    const port = document.getElementById('smtp-port').value.trim();
    
    if (!credentials) {
        appendToSMTPLog('ERROR: No SMTP credentials provided', 'error');
        smtpTesting = false;
        return;
    }
    
    if (!recipient) {
        appendToSMTPLog('ERROR: No recipient email provided', 'error');
        smtpTesting = false;
        return;
    }
    
    appendToSMTPLog(`Starting SMTP test with server: ${server}:${port}`, 'info');
    appendToSMTPLog(`Recipient: ${recipient}`, 'info');
    
    const credentialLines = credentials.split('\n').filter(line => line.trim());
    appendToSMTPLog(`Found ${credentialLines.length} credentials to test`, 'info');
    
    // Send credentials to backend for testing
    fetch('/api/test_smtp', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({
            credentials: credentialLines,
            recipient: recipient,
            server: server,
            port: parseInt(port)
        })
    })
    .then(response => response.json())
    .then(data => {
        if (data.status === 'success') {
            appendToSMTPLog('SMTP test completed successfully', 'success');
            if (data.results) {
                data.results.forEach(result => {
                    const status = result.success ? 'success' : 'error';
                    appendToSMTPLog(`${result.email}: ${result.message}`, status);
                });
            }
        } else {
            appendToSMTPLog(`SMTP test failed: ${data.message}`, 'error');
        }
        smtpTesting = false;
    })
    .catch(error => {
        appendToSMTPLog(`SMTP test error: ${error.message}`, 'error');
        smtpTesting = false;
    });
}

function interruptSMTPTesting() {
    if (smtpTesting) {
        smtpTesting = false;
        appendToSMTPLog('SMTP testing interrupted by user', 'warning');
    } else {
        appendToSMTPLog('No SMTP testing in progress', 'info');
    }
}

function clearSMTPResults() {
    const logContainer = document.getElementById('smtp-results-log');
    if (logContainer) {
        logContainer.innerHTML = `
            <div class="status-info">
                <p><strong><i class="fas fa-envelope"></i> SMTP Testing Results</strong></p>
                <p>Test results will appear here...</p>
            </div>
        `;
    }
    console.log('SMTP results cleared');
}

function appendToSMTPLog(message, type = 'info') {
    const logContainer = document.getElementById('smtp-results-log');
    if (!logContainer) return;
    
    const timestamp = new Date().toLocaleTimeString();
    const logEntry = document.createElement('div');
    logEntry.className = `log-entry log-${type}`;
    logEntry.innerHTML = `[${timestamp}] ${message}`;
    
    // Remove status info if it exists
    const statusInfo = logContainer.querySelector('.status-info');
    if (statusInfo) {
        statusInfo.remove();
    }
    
    logContainer.appendChild(logEntry);
    logContainer.scrollTop = logContainer.scrollHeight;
}

// CSV Generation Functions
function generateUserCSV() {
    const numUsers = document.getElementById('csv-num-users').value;
    const domain = document.getElementById('csv-domain').value.trim();
    const password = document.getElementById('csv-password').value.trim();
    
    if (!numUsers || !domain) {
        alert('Please fill in number of users and domain');
        return;
    }
    
    const downloadArea = document.getElementById('csv-download-area');
    downloadArea.innerHTML = '<p>Generating CSV...</p>';
    
    fetch('/api/generate_csv', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({
            num_users: parseInt(numUsers),
            domain: domain,
            password: password || 'defaultPassword123'
        })
    })
    .then(response => response.json())
    .then(data => {
        if (data.status === 'success') {
            downloadArea.innerHTML = `
                <div class="status-info">
                    <p><strong><i class="fas fa-check"></i> CSV Generated Successfully</strong></p>
                    <p>File: ${data.filename}</p>
                    <a href="/api/download_csv/${data.filename}" class="btn-github btn-github-primary" download>
                        <i class="fas fa-download"></i> Download CSV
                    </a>
                </div>
            `;
        } else {
            downloadArea.innerHTML = `
                <div class="status-error">
                    <p><strong><i class="fas fa-exclamation-triangle"></i> Error</strong></p>
                    <p>${data.message}</p>
                </div>
            `;
        }
    })
    .catch(error => {
        downloadArea.innerHTML = `
            <div class="status-error">
                <p><strong><i class="fas fa-exclamation-triangle"></i> Error</strong></p>
                <p>Failed to generate CSV: ${error.message}</p>
            </div>
        `;
    });
}

function previewCSV() {
    const numUsers = document.getElementById('csv-num-users').value;
    const domain = document.getElementById('csv-domain').value.trim();
    const password = document.getElementById('csv-password').value.trim();
    
    if (!numUsers || !domain) {
        alert('Please fill in number of users and domain');
        return;
    }
    
    const previewArea = document.getElementById('csv-preview-area');
    previewArea.innerHTML = '<p>Generating preview...</p>';
    
    // Generate a small preview (max 5 users)
    const previewCount = Math.min(parseInt(numUsers), 5);
    let csvContent = 'first_name,last_name,email,password\n';
    
    for (let i = 1; i <= previewCount; i++) {
        const firstName = `User${i}`;
        const lastName = `Test`;
        const email = `user${i}@${domain}`;
        const userPassword = password || 'defaultPassword123';
        csvContent += `${firstName},${lastName},${email},${userPassword}\n`;
    }
    
    if (parseInt(numUsers) > 5) {
        csvContent += `... and ${parseInt(numUsers) - 5} more users\n`;
    }
    
    previewArea.innerHTML = `
        <div class="status-info">
            <p><strong><i class="fas fa-eye"></i> CSV Preview (First ${previewCount} users)</strong></p>
            <pre style="font-family: monospace; font-size: 12px; background-color: var(--color-canvas-subtle); padding: 12px; border-radius: 4px; overflow-x: auto;">${csvContent}</pre>
        </div>
    `;
}

// Initialize page
document.addEventListener('DOMContentLoaded', function() {
    console.log('Dashboard initialized');
    
    // Ensure tab1 is visible by default
    showTab('tab1');
    
    // Load account statistics
    updateAccountStats();
});

// Account management functions
function updateAccountStats() {
    const accountSelect = document.getElementById('account-select');
    const accountStats = document.getElementById('account-stats');
    
    if (accountSelect && accountStats) {
        const totalAccounts = accountSelect.options.length - 1; // Subtract 1 for the default option
        accountStats.textContent = `Total Accounts: ${totalAccounts}`;
    }
}

function authenticateAccount() {
    const accountSelect = document.getElementById('account-select');
    const selectedAccount = accountSelect.value;
    
    if (!selectedAccount) {
        alert('Please select an account first');
        return;
    }
    
    console.log('Authenticating account:', selectedAccount);
    
    // Send authentication request to backend
    fetch('/api/authenticate', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({
            account_name: selectedAccount
        })
    })
    .then(response => response.json())
    .then(data => {
        if (data.status === 'success') {
            updateAuthStatus(`‚úÖ Authenticated: ${selectedAccount}`, 'success');
            currentAccount = selectedAccount;
            isAuthenticated = true;
        } else {
            updateAuthStatus(`‚ùå Authentication failed: ${data.message}`, 'error');
        }
    })
    .catch(error => {
        updateAuthStatus(`‚ùå Authentication error: ${error.message}`, 'error');
    });
}

function updateAuthStatus(message, type) {
    const authStatus = document.getElementById('auth-status');
    if (authStatus) {
        authStatus.innerHTML = `<p class="status-${type}">${message}</p>`;
    }
}

// Additional utility functions can be added here as needed
function filterAccounts() {
    const searchInput = document.getElementById('account-search');
    const accountItems = document.querySelectorAll('.account-item');
    const searchTerm = searchInput.value.toLowerCase();
    
    accountItems.forEach(item => {
        const accountName = item.textContent.toLowerCase();
        if (accountName.includes(searchTerm)) {
            item.style.display = 'block';
        } else {
            item.style.display = 'none';
        }
    });
}

function selectAccountFromList(accountName, accountId) {
    selectedAccountFromList = accountName;
    selectedAccountId = accountId;
    
    // Update visual selection
    const accountItems = document.querySelectorAll('.account-item');
    accountItems.forEach(item => {
        item.classList.remove('selected');
    });
    
    event.target.classList.add('selected');
    console.log('Selected account from list:', accountName);
}

// Modal functions
function openAddAccountModal() {
    const modal = document.getElementById('addAccountModal');
    if (modal) {
        modal.style.display = 'flex';
    }
}

function closeAddAccountModal() {
    const modal = document.getElementById('addAccountModal');
    if (modal) {
        modal.style.display = 'none';
    }
}

function saveNewAccount() {
    const email = document.getElementById('new-account-email').value.trim();
    const clientId = document.getElementById('new-client-id').value.trim();
    const clientSecret = document.getElementById('new-client-secret').value.trim();
    
    if (!email || !clientId || !clientSecret) {
        alert('Please fill in all fields');
        return;
    }
    
    // Send to backend
    fetch('/api/add_account', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({
            email: email,
            client_id: clientId,
            client_secret: clientSecret
        })
    })
    .then(response => response.json())
    .then(data => {
        if (data.status === 'success') {
            alert('Account added successfully');
            closeAddAccountModal();
            location.reload(); // Refresh to show new account
        } else {
            alert(`Failed to add account: ${data.message}`);
        }
    })
    .catch(error => {
        alert(`Error adding account: ${error.message}`);
    });
}

// ========================================
// ACCOUNT MANAGEMENT FUNCTIONS
// ========================================

function addFromServerJSON() {
    console.log('Adding accounts from server JSON...');
    
    fetch('/api/add_from_server_json', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        }
    })
    .then(response => response.json())
    .then(data => {
        if (data.status === 'success') {
            alert(`Successfully added ${data.count} accounts from server`);
            location.reload();
        } else {
            alert(`Failed to add accounts: ${data.message}`);
        }
    })
    .catch(error => {
        alert(`Error: ${error.message}`);
    });
}

function forceTokenStatusCheck() {
    console.log('Forcing token status check...');
    
    fetch('/api/force_token_check', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        }
    })
    .then(response => response.json())
    .then(data => {
        updateAuthStatus(`Token check completed: ${data.message}`, data.status === 'success' ? 'success' : 'warning');
    })
    .catch(error => {
        updateAuthStatus(`Token check error: ${error.message}`, 'error');
    });
}

function enterAuthorizationCode() {
    const code = prompt('Enter the authorization code:');
    if (code) {
        fetch('/api/enter_auth_code', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({ code: code })
        })
        .then(response => response.json())
        .then(data => {
            if (data.status === 'success') {
                updateAuthStatus('Authorization code processed successfully', 'success');
            } else {
                updateAuthStatus(`Authorization failed: ${data.message}`, 'error');
            }
        })
        .catch(error => {
            updateAuthStatus(`Authorization error: ${error.message}`, 'error');
        });
    }
}

function authenticateFromList() {
    if (!selectedAccountFromList) {
        alert('Please select an account from the list first');
        return;
    }
    
    console.log('Authenticating selected account:', selectedAccountFromList);
    
    fetch('/api/authenticate', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({
            account_name: selectedAccountFromList
        })
    })
    .then(response => response.json())
    .then(data => {
        if (data.status === 'success') {
            updateAuthStatus(`‚úÖ Authenticated: ${selectedAccountFromList}`, 'success');
            currentAccount = selectedAccountFromList;
            isAuthenticated = true;
        } else {
            updateAuthStatus(`‚ùå Authentication failed: ${data.message}`, 'error');
        }
    })
    .catch(error => {
        updateAuthStatus(`‚ùå Authentication error: ${error.message}`, 'error');
    });
}

function deleteFromList() {
    if (!selectedAccountFromList) {
        alert('Please select an account from the list first');
        return;
    }
    
    if (confirm(`Are you sure you want to delete account: ${selectedAccountFromList}?`)) {
        fetch('/api/delete_account', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                account_id: selectedAccountId
            })
        })
        .then(response => response.json())
        .then(data => {
            if (data.status === 'success') {
                alert('Account deleted successfully');
                location.reload();
            } else {
                alert(`Failed to delete account: ${data.message}`);
            }
        })
        .catch(error => {
            alert(`Error deleting account: ${error.message}`);
        });
    }
}

// ========================================
// USER MANAGEMENT FUNCTIONS (TAB 1)
// ========================================

function retrieveUsers() {
    if (!isAuthenticated) {
        alert('Please authenticate an account first');
        return;
    }
    
    console.log('Retrieving users...');
    const userDisplay = document.getElementById('user-display');
    const userCount = document.getElementById('user-count');
    
    userDisplay.innerHTML = '<p>Loading users...</p>';
    
    fetch('/api/get_users', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        }
    })
    .then(response => response.json())
    .then(data => {
        if (data.status === 'success') {
            displayUsers(data.users);
            userCount.textContent = `Total Users: ${data.users.length}`;
        } else {
            userDisplay.innerHTML = `<p class="status-error">Error: ${data.message}</p>`;
        }
    })
    .catch(error => {
        userDisplay.innerHTML = `<p class="status-error">Error: ${error.message}</p>`;
    });
}

function displayUsers(users) {
    const userDisplay = document.getElementById('user-display');
    let html = '<div style="max-height: 400px; overflow-y: auto;">';
    
    users.forEach(user => {
        const status = user.suspended ? 'Suspended' : 'Active';
        const statusClass = user.suspended ? 'status-error' : 'status-success';
        const adminBadge = user.isAdmin ? ' <span class="badge badge-primary">Admin</span>' : '';
        
        html += `
            <div style="border: 1px solid var(--color-border-default); padding: 12px; margin: 8px 0; border-radius: 6px;">
                <strong>${user.name}</strong>${adminBadge}<br>
                <span style="color: var(--color-fg-muted);">${user.primaryEmail}</span><br>
                <span class="${statusClass}">${status}</span>
            </div>
        `;
    });
    
    html += '</div>';
    userDisplay.innerHTML = html;
}

function clearUserList() {
    const userDisplay = document.getElementById('user-display');
    const userCount = document.getElementById('user-count');
    
    userDisplay.innerHTML = `
        <div class="status-info">
            <p><strong><i class="fas fa-users"></i> User Management</strong></p>
            <p>Click "Retrieve All Users" to load and display all users from your Google Workspace.</p>
            <p><small>This will show user status (Active/Suspended), admin privileges, and provide options for bulk operations.</small></p>
        </div>
    `;
    userCount.textContent = 'Total Users: 0';
}

function copyAllUsers() {
    const userDisplay = document.getElementById('user-display');
    const text = userDisplay.textContent;
    
    if (navigator.clipboard) {
        navigator.clipboard.writeText(text).then(() => {
            alert('User list copied to clipboard');
        });
    } else {
        alert('Clipboard not supported');
    }
}

function updateAllPasswords() {
    const newPassword = document.getElementById('new-password').value.trim();
    
    if (!newPassword) {
        alert('Please enter a new password');
        return;
    }
    
    if (!isAuthenticated) {
        alert('Please authenticate an account first');
        return;
    }
    
    if (confirm(`Are you sure you want to update password for ALL users to: ${newPassword}?`)) {
        fetch('/api/update_all_passwords', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify({
                new_password: newPassword
            })
        })
        .then(response => response.json())
        .then(data => {
            if (data.status === 'success') {
                alert(`Password updated for ${data.updated_count} users`);
                document.getElementById('new-password').value = '';
            } else {
                alert(`Failed to update passwords: ${data.message}`);
            }
        })
        .catch(error => {
            alert(`Error: ${error.message}`);
        });
    }
}

function loadSuspendedUsers() {
    if (!isAuthenticated) {
        alert('Please authenticate an account first');
        return;
    }
    
    const suspendedDisplay = document.getElementById('suspended-display');
    suspendedDisplay.innerHTML = '<p>Loading suspended users...</p>';
    
    fetch('/api/get_suspended_users', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        }
    })
    .then(response => response.json())
    .then(data => {
        if (data.status === 'success') {
            displaySuspendedUsers(data.users);
        } else {
            suspendedDisplay.innerHTML = `<p class="status-error">Error: ${data.message}</p>`;
        }
    })
    .catch(error => {
        suspendedDisplay.innerHTML = `<p class="status-error">Error: ${error.message}</p>`;
    });
}

function displaySuspendedUsers(users) {
    const suspendedDisplay = document.getElementById('suspended-display');
    
    if (users.length === 0) {
        suspendedDisplay.innerHTML = '<p class="status-success">No suspended users found</p>';
        return;
    }
    
    let html = '<div style="max-height: 300px; overflow-y: auto;">';
    
    users.forEach(user => {
        const adminBadge = user.isAdmin ? ' <span class="badge badge-primary">Admin</span>' : '';
        html += `
            <div style="border: 1px solid var(--color-border-default); padding: 10px; margin: 6px 0; border-radius: 4px;">
                <strong>${user.name}</strong>${adminBadge}<br>
                <span style="color: var(--color-fg-muted);">${user.primaryEmail}</span><br>
                <span class="status-error">Suspended</span>
            </div>
        `;
    });
    
    html += '</div>';
    suspendedDisplay.innerHTML = html;
}

function copySuspendedUsers() {
    const suspendedDisplay = document.getElementById('suspended-display');
    const text = suspendedDisplay.textContent;
    
    if (navigator.clipboard) {
        navigator.clipboard.writeText(text).then(() => {
            alert('Suspended users list copied to clipboard');
        });
    } else {
        alert('Clipboard not supported');
    }
}

function refreshSuspendedUsers() {
    loadSuspendedUsers();
}

function clearSuspendedUsers() {
    const suspendedDisplay = document.getElementById('suspended-display');
    suspendedDisplay.innerHTML = `
        <div class="status-info">
            <p><strong><i class="fas fa-user-slash"></i> Suspended User Management</strong></p>
            <p>Click "Load Suspended Users" to check for suspended accounts in your Google Workspace.</p>
            <p><small>This will show all users with suspended status, including their names, emails, and admin privileges.</small></p>
        </div>
    `;
}

console.log('Dashboard JavaScript loaded successfully');
</script>

<!-- Additional Functions -->
<script src="{{ url_for('static', filename='dashboard-functions.js') }}"></script>

{% endblock %}
